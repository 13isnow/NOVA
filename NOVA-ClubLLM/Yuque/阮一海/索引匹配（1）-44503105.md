publish time: 2023-12-16T01:35:24.000Z  
https://www.yuque.com/rhg37y/fvdi39/ks3rqp3prwg8m9le  
author: é˜®ä¸€æµ·  
---
 ![](https://cdn.nlark.com/yuque/0/2023/png/38709574/1702339642271-4c933170-067a-43fe-b581-9fa16ccb47da.png)

å¯æ¶ï¼Œéš”äº†ä¸¤å¤©æ²¡å¤„ç†ä»»åŠ¡ï¼Œçœ‹ä¸æ‡‚ä»£ç äº†QAQ

```python
import jieba
from gensim import corpora, models, similarities


dictionary = corpora.Dictionary()
index = similarities.SparseMatrixSimilarity([], num_features=12)
tfidf = models.TfidfModel([[(0, 0)]])


# åˆ†è¯ä¸å»åœç”¨è¯, æ„å»ºè¯å…¸
def build_dic():
    global dictionary
    source_file = open('å—äº¬å¤§å­¦å­¦ç”Ÿæ‰‹å†Œ2023ç‰ˆ.txt', encoding="utf-8")  # æºæ–‡ä»¶
    stop_list = open('cn_stopwords.txt', encoding='utf-8')  # åœç”¨è¯æ–‡ä»¶
    texts = []
    stopwords = {}.fromkeys([line.rstrip() for line in stop_list])
    for line in source_file:
        words = jieba.cut(line, cut_all=False)
        for word in words:
            word = word.replace('
', '').replace(' ', '')
            if word not in stopwords:
                if word not in ['']:
                    texts.append([word])
    source_file.close()
    stop_list.close()
    dictionary = corpora.Dictionary(texts)


# TF-IDFè½¬æ¢
def create_tfidf():
    global index, tfidf
    source_file = open('å—äº¬å¤§å­¦å­¦ç”Ÿæ‰‹å†Œ2023ç‰ˆ.txt', encoding="utf-8")  # æºæ–‡ä»¶
    new_vec = []
    for line in source_file:
        sentences = jieba.cut(line, cut_all=False)
        new_vec.append(dictionary.doc2bow(sentences))

    tfidf = models.TfidfModel(new_vec)
    index = similarities.SparseMatrixSimilarity(tfidf[new_vec], num_features=12)
    source_file.close()


# æ±‚ç›¸ä¼¼åº¦
def get_similarity():
    global index
    doc = ["å­¦ç”Ÿ", "æ´»åŠ¨"]
    vec_bow = dictionary.doc2bow(doc)
    sims = index[tfidf[vec_bow]]
    print(list(enumerate(sims)))


if __name__ == "__main__":
    build_dic()
    create_tfidf()
    get_similarity()
```

ä¸€æ™šä¸Šï¼Œæ•´æ•´5å°æ—¶æˆ‘éƒ½æ²¡æœ‰æ‰¾åˆ°bugåœ¨å“ªé‡Œï¼Œç‰ç‰äº†

![](https://cdn.nlark.com/yuque/0/2023/png/38709574/1702567196950-5cdbd962-36bf-4413-9588-491de1c68ecd.png)

[TF-IDFï¼ˆ2ï¼‰](https://nova.yuque.com/rhg37y/fvdi39/cknccilis7ak6zgr)æœ€åå‡ºç°çš„é‚£ä¸ªé—®é¢˜å¹¶æ²¡æœ‰è§£å†³ï¼Œå½“æ—¶å‡ºäº†ç»“æœåªæ˜¯å› ä¸ºå®ƒæ°å·§æ˜¯ä¸€ä¸ªç‰¹ä¾‹



<details class="lake-collapse"><summary id="ubdceeb03"><span class="ne-text">è®°å½•ä¸€ä¸‹è‡ªå·±çš„çŒœæµ‹è¯•é”™è¿‡ç¨‹</span></summary><p id="u448b5db8" class="ne-p"><span class="ne-text">1ï¼Œä¾å¾ªè€å¸ˆçš„æ€è·¯ï¼Œæ˜¯å†…å­˜å¤ªå¤§äº†ï¼ŸæŠŠä»£ç æ‹†è§£æˆä¸€ä¸ªä¸ªå‡½æ•°è¯•è¯•	</span><span data-color="0" id="LGvPm" class="ne-label">Ã—</span><span class="ne-text"></span></p><p id="uad4c9a3a" class="ne-p"><span class="ne-text">2ï¼ŒASCIIç¼–ç æœ‰é—®é¢˜ï¼Ÿæ¢æˆutf-8è¯•è¯•	</span><span data-color="0" id="jfM0p" class="ne-label">Ã—</span></p><p id="u8dfd307e" class="ne-p"><span class="ne-text">3ï¼Œæœ‰ä¸€äº›ç©ºå€¼ï¼Œå¦‚ [], &quot;&quot;ï¼Œéš¾é“æˆ‘ç”¨çš„å‡½æ•°å¤„ç†ä¸äº†ä»–ä»¬ï¼Ÿ	</span><span data-color="0" id="a1wsX" class="ne-label">Ã—</span></p><p id="ufdb66587" class="ne-p"><span class="ne-text">4ï¼Œæ±‚åŠ©AIï¼ŒAIæä¾›äº†ä¸€äº›æ€è·¯	</span><span data-color="0" id="SKLa9" class="ne-label">Ã—</span></p><p id="ue006cef7" class="ne-p"><span class="ne-text">5ï¼Œ</span><span class="ne-text" style="color: #601BDE">indexæ­å»ºæœ‰é—®é¢˜</span><span class="ne-text">ï¼Œè°ƒæ•´ä¸€ä¸‹å®ƒè°ƒç”¨çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å®ƒæœ¬æ¥è°ƒç”¨çš„å‚æ•°ç±»å‹æ˜¯list[list[list[tuple[int, int]]]]ç±»å‹ï¼Œæˆ‘æ¥æ’åˆ—ç»„åˆå¢åˆ ä¿®æ”¹ä¸€ä¸‹	</span><span data-color="0" id="gQ0k8" class="ne-label">Ã—</span></p><p id="u0b695de1" class="ne-p"><span class="ne-text">6ï¼Œå†æ¬¡æœç´¢æŠ¥é”™ä»£ç çš„æ„æ€ï¼ŒæŒ‡é’ˆé”™è¯¯ï¼Ÿæ–­ç‚¹ä¸€è¡Œè¡Œæ–‡æ¡£æŸ¥	</span><span data-color="0" id="rnsvQ" class="ne-label">Ã—</span></p><p id="u7dedd482" class="ne-p"><span class="ne-text">7ï¼Œä¸ä¼šæ˜¯æˆ‘ç”¨çš„æ–‡æ¡£å¤ªè€äº†å§ï¼ˆ2017å¹´çš„ï¼‰ï¼Œå¤šæœç´¢ä¸€äº›ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ç±»ä¼¼æ•™ç¨‹	</span><span data-color="0" id="sy8Uw" class="ne-label">Ã—</span><span class="ne-text"></span></p><p id="u335f50f3" class="ne-p"><span class="ne-text">8ï¼Œç»ä¸ä½œè€…çš„æ–‡æ¡£é€å­—æ¯”å¯¹ï¼Œå‘ç°ä½œè€…çš„æ–‡æ¡£çŸ©é˜µæ˜¯ï¼ˆintï¼Œdoubleï¼‰ç±»å‹ï¼Œè€Œæˆ‘çš„æ˜¯ï¼ˆintï¼Œintï¼‰ç±»å‹ï¼Œè¯•ç€æ”¹æ”¹ï¼ˆæ­»é©¬å½“æ´»é©¬åŒ»â€¦â€¦ï¼‰</span><span data-color="0" id="dmM9w" class="ne-label">Ã—</span></p></details>
æœŸé—´è¿˜æœ‰åå¤çš„printå„ç§å˜é‡ï¼ŒæœŸå¾…ç€å‘ç°å“ªå¤„æˆ‘æ¼æ‰çš„ç»†èŠ‚ï¼Œè¿˜æœ‰äº›çç¢çš„æ€è·¯ä¸ä¿®æ”¹æˆ‘ä¹Ÿå¿˜äº†



æœ€åæˆ‘å†æ¬¡<font style="color:#601BDE;">æ±‚åŠ©äºAI</font>ï¼Œè€ä¸‹æ€§å­å°è¯•ä¸€æ­¥æ­¥è¯¢é—®

<details class="lake-collapse"><summary id="u0610c75d"><span class="ne-text">è¿™æ˜¯å¤±è´¥çš„ä¸Šä¸€æ¬¡ï¼Œå¯ä»¥å¯¹æ¯”ä¸€ä¸‹</span></summary><p id="uee915511" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2023/png/38709574/1702689437625-82961015-7152-4e6c-a098-1bb1369e9fd8.png" width="1295" id="ue9d85c6b" class="ne-image"></p></details>
<details class="lake-collapse"><summary id="u731bac2a"><span class="ne-text">æœ¬æ¬¡å¯¹è¯</span></summary><p id="u6f4486e2" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2023/png/38709574/1702689545409-8e4fb1ef-d991-4744-8087-23ca56fe3b27.png" width="1270" id="ue1b5670f" class="ne-image"></p></details>
å®ƒæåˆ°ä¸€ä¸ªè¢«æˆ‘ä¹‹å‰å¿½è§†çš„ä¸€ç‚¹ï¼ˆæˆ–è®¸æˆ‘å¿½è§†å®ƒä¹Ÿæœ‰ä¸€ç‚¹è€å¸ˆçš„åŸå› â†_â†ï¼‰



![](https://cdn.nlark.com/yuque/0/2023/png/38709574/1702689751494-eb288ea0-1869-4972-976d-ffffe43a9471.png)å‰é¢æ²¡æœ‰ææ¸…æ¥šè¿™ä¸ªå‚æ•°çš„ç”¨å¤„ï¼Œè¿™æ¬¡æˆ‘æœç´¢æŸ¥è¯¢ä¸€ä¸‹ã€num_features=12ã€‘

[åŸºäºgensim TFIDFæ¨¡å‹ çš„æ–‡ç« æ¨èç®—æ³•-CSDNåšå®¢](https://blog.csdn.net/qq_34333481/article/details/85327090)

![](https://cdn.nlark.com/yuque/0/2023/png/38709574/1702689894347-08bb89f6-facf-4afd-9415-8b8c8acab42a.png)

æˆ‘æŠŠè¿™ä¸²ä»£ç æ›¿æ¢ä¸Šå»

```python
import jieba
from gensim import corpora, models, similarities


dictionary = corpora.Dictionary()
new_vec = []
tfidf = models.TfidfModel([[]])


# åˆ†è¯ä¸å»åœç”¨è¯, æ„å»ºè¯å…¸
def build_dic():
    global dictionary
    source_file = open('å—äº¬å¤§å­¦å­¦ç”Ÿæ‰‹å†Œ2023ç‰ˆ.txt', encoding="utf-8")  # æºæ–‡ä»¶
    stop_list = open('cn_stopwords.txt', encoding='utf-8')  # åœç”¨è¯æ–‡ä»¶
    texts = []
    stopwords = {}.fromkeys([line.rstrip() for line in stop_list])
    for line in source_file:
        words = jieba.cut(line, cut_all=False)
        for word in words:
            word = word.replace('
', '').replace(' ', '')
            if word not in stopwords:
                if word not in ['']:
                    texts.append([word])
    source_file.close()
    stop_list.close()
    dictionary = corpora.Dictionary(texts)


# TF-IDFè½¬æ¢
def create_tfidf():
    global new_vec, tfidf
    source_file = open('å—äº¬å¤§å­¦å­¦ç”Ÿæ‰‹å†Œ2023ç‰ˆ.txt', encoding="utf-8")  # æºæ–‡ä»¶
    new_vec = []
    for line in source_file:
        new_vec.append(dictionary.doc2bow(jieba.cut(line, cut_all=False)))
    while [] in new_vec:
        new_vec.remove([])
    tfidf = models.TfidfModel(new_vec)
    source_file.close()


# æ±‚ç›¸ä¼¼åº¦
def get_similarity():
    doc = ["å­¦ç”Ÿ", "æ´»åŠ¨"]
    vec_bow = dictionary.doc2bow(doc)
    index = similarities.SparseMatrixSimilarity(tfidf[new_vec], num_features=len(dictionary.token2id.keys()))
    sims = index[tfidf[vec_bow]]
    print(list(enumerate(sims)))


if __name__ == "__main__":
    build_dic()
    create_tfidf()
    get_similarity()

```

ç»ˆäºæˆåŠŸäº†

ğŸ˜€ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜†ğŸ˜…ğŸ¤£ğŸ˜‚ğŸ™‚ğŸ™ƒğŸ˜‰ğŸ˜ŠğŸ˜ğŸ˜‡ğŸ˜˜ğŸ˜—ğŸ˜šğŸ˜™ğŸ˜‹ğŸ˜›ğŸ˜œğŸ˜ğŸ¤‘ğŸ¤—ğŸ¤”ğŸ¤ğŸ˜ğŸ˜‘ğŸ˜¶ğŸ˜ğŸ˜’ğŸ™„ğŸ˜¬ğŸ¤¥ğŸ˜ŒğŸ˜”ğŸ˜ªğŸ¤¤ğŸ˜´ğŸ˜·ğŸ¤’ğŸ¤•ğŸ¤¢ğŸ¤§ğŸ˜µğŸ¤ ğŸ˜ğŸ¤“ğŸ˜•ğŸ™ğŸ˜ŸğŸ˜®ğŸ˜¯ğŸ˜²ğŸ˜³ğŸ˜¦ğŸ˜§ğŸ˜¨ğŸ˜°ğŸ˜¥ğŸ˜¢ğŸ˜­ğŸ˜±ğŸ˜–ğŸ˜£ğŸ˜ğŸ˜“ğŸ˜©ğŸ˜«ğŸ˜¤ğŸ˜¡ğŸ˜ ğŸ˜ˆğŸ‘¿ğŸ’€â˜ ï¸ğŸ’©ğŸ¤¡ğŸ‘¹ğŸ‘ºğŸ‘»ğŸ‘½ğŸ‘¾ğŸ¤–ğŸ˜ºğŸ˜¸ğŸ˜¹ğŸ˜»ğŸ˜¼ğŸ˜½ğŸ™€ğŸ˜¿ğŸ˜¾ğŸ™ˆğŸ™‰ğŸ™ŠğŸ’‹ğŸ’ŒğŸ’˜ğŸ’ğŸ’–ğŸ’—ğŸ’“ğŸ’ğŸ’•ğŸ’Ÿâ£ï¸ğŸ’”â¤ï¸ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ–¤ğŸ’¯ğŸ’¢ğŸ’¥ğŸ’«ğŸ’¦ğŸ’¨ğŸ•³ï¸ğŸ’£ğŸ’¬ğŸ‘ï¸â€ğŸ—¨ï¸ğŸ—¨ï¸ğŸ—¯ï¸ğŸ’­ğŸ’¤

<details class="lake-collapse"><summary id="u8e5a2c1b"><span class="ne-text">æ•ˆæœå±•ç¤º</span></summary><p id="ue85fe54a" class="ne-p"><img src="https://cdn.nlark.com/yuque/0/2023/png/38709574/1702690083546-9dbde161-1201-4b0a-abb9-247eefb51fda.png" width="827" id="u04f6123f" class="ne-image"></p></details>
:::warning
<font style="color:#601BDE;">è§£é‡Šä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œé‡Œé¢æ˜¯è‹¥å¹²å…ƒç»„ï¼Œå½¢å¦‚(a, b)ã€‚å…¶ä¸­aæŒ‡çš„æ˜¯è¯­å¥ç¼–å·ï¼Œæ¯”å¦‚txtçš„ç¬¬5å¥è¯ï¼Œé‚£ä¹ˆa==5ï¼›bæ˜¯è¯­å¥ç›¸ä¼¼åº¦ï¼Œæ¯”å¦‚æˆ‘è¾“å…¥å…³é”®è¯[" å­¦ç”Ÿ", "æ´»åŠ¨"]ï¼Œå®ƒä¼šæ¯”è¾ƒæ¯å¥è¯ä¸è¿™ç»„å…³é”®è¯çš„tfidfå€¼ï¼ˆä¸€ç§å¯¹æ–‡æœ¬çš„é‡åŒ–æ–¹å¼ï¼‰ï¼Œç»™å‡ºä¸¤è€…çš„ç›¸ä¼¼åº¦ã€‚</font>

<font style="color:#601BDE;">å¦‚æ­¤ï¼Œæˆ‘å°±å¯ä»¥æ’åºäº†ï¼ŒæŠŠç›¸ä¼¼åº¦æœ€é«˜çš„å‡ å¥è¯åˆ—å‡ºæ¥ï¼Œå®ç°ç´¢å¼•ï¼</font>

:::



